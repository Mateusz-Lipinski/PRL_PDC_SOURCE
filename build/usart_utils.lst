ARM GAS  /tmp/cc5TSKkW.s 			page 1


   1              		.cpu cortex-m0plus
   2              		.eabi_attribute 20, 1
   3              		.eabi_attribute 21, 1
   4              		.eabi_attribute 23, 3
   5              		.eabi_attribute 24, 1
   6              		.eabi_attribute 25, 1
   7              		.eabi_attribute 26, 1
   8              		.eabi_attribute 30, 1
   9              		.eabi_attribute 34, 0
  10              		.eabi_attribute 18, 4
  11              		.file	"usart_utils.c"
  12              		.text
  13              	.Ltext0:
  14              		.cfi_sections	.debug_frame
  15              		.section	.text.UART_PARSE,"ax",%progbits
  16              		.align	1
  17              		.global	UART_PARSE
  18              		.syntax unified
  19              		.code	16
  20              		.thumb_func
  21              		.fpu softvfp
  23              	UART_PARSE:
  24              	.LFB284:
  25              		.file 1 "Src/usart_utils.c"
   1:Src/usart_utils.c **** #include "usart.h"
   2:Src/usart_utils.c **** #include <stdio.h>
   3:Src/usart_utils.c **** #include "state.h"
   4:Src/usart_utils.c **** #include "usart_utils.h"
   5:Src/usart_utils.c **** 
   6:Src/usart_utils.c **** extern state State;
   7:Src/usart_utils.c **** 
   8:Src/usart_utils.c **** void UART_PARSE(uint8_t buffer[UART_RX_BUFFER_LENGTH])
   9:Src/usart_utils.c **** {
  26              		.loc 1 9 0
  27              		.cfi_startproc
  28              		@ args = 0, pretend = 0, frame = 104
  29              		@ frame_needed = 0, uses_anonymous_args = 0
  30              	.LVL0:
  31 0000 30B5     		push	{r4, r5, lr}
  32              	.LCFI0:
  33              		.cfi_def_cfa_offset 12
  34              		.cfi_offset 4, -12
  35              		.cfi_offset 5, -8
  36              		.cfi_offset 14, -4
  37 0002 9BB0     		sub	sp, sp, #108
  38              	.LCFI1:
  39              		.cfi_def_cfa_offset 120
  40 0004 0400     		movs	r4, r0
  41              	.LBB2:
  10:Src/usart_utils.c ****     SERIAL_WRITE(" => ");
  42              		.loc 1 10 0
  43 0006 01AD     		add	r5, sp, #4
  44 0008 6022     		movs	r2, #96
  45 000a 0021     		movs	r1, #0
  46 000c 02A8     		add	r0, sp, #8
  47              	.LVL1:
  48 000e FFF7FEFF 		bl	memset
ARM GAS  /tmp/cc5TSKkW.s 			page 2


  49              	.LVL2:
  50 0012 384B     		ldr	r3, .L19
  51 0014 1A68     		ldr	r2, [r3]
  52 0016 0192     		str	r2, [sp, #4]
  53 0018 1B79     		ldrb	r3, [r3, #4]
  54 001a 2B71     		strb	r3, [r5, #4]
  55              	.LVL3:
  56 001c FA23     		movs	r3, #250
  57 001e 9B00     		lsls	r3, r3, #2
  58 0020 0422     		movs	r2, #4
  59 0022 2900     		movs	r1, r5
  60 0024 3448     		ldr	r0, .L19+4
  61 0026 FFF7FEFF 		bl	HAL_UART_Transmit
  62              	.LVL4:
  63              	.LBE2:
  64              	.LBB3:
  11:Src/usart_utils.c ****     if (strcmp(buffer, "blink") == 0)
  65              		.loc 1 11 0
  66 002a 3449     		ldr	r1, .L19+8
  67 002c 2000     		movs	r0, r4
  68 002e FFF7FEFF 		bl	strcmp
  69              	.LVL5:
  70 0032 0028     		cmp	r0, #0
  71 0034 2DD0     		beq	.L11
  12:Src/usart_utils.c ****     {
  13:Src/usart_utils.c ****         State.cmd = cmd_blink;
  14:Src/usart_utils.c ****     }
  15:Src/usart_utils.c ****     else if (strcmp(buffer, "adc id") == 0)
  72              		.loc 1 15 0
  73 0036 3249     		ldr	r1, .L19+12
  74 0038 2000     		movs	r0, r4
  75 003a FFF7FEFF 		bl	strcmp
  76              	.LVL6:
  77 003e 0028     		cmp	r0, #0
  78 0040 2CD0     		beq	.L12
  16:Src/usart_utils.c ****     {
  17:Src/usart_utils.c ****         State.cmd = cmd_adc_id;
  18:Src/usart_utils.c ****     }
  19:Src/usart_utils.c ****     else if (strcmp(buffer, "adc reset") == 0)
  79              		.loc 1 19 0
  80 0042 3049     		ldr	r1, .L19+16
  81 0044 2000     		movs	r0, r4
  82 0046 FFF7FEFF 		bl	strcmp
  83              	.LVL7:
  84 004a 0028     		cmp	r0, #0
  85 004c 2AD0     		beq	.L13
  20:Src/usart_utils.c ****     {
  21:Src/usart_utils.c ****         State.cmd = cmd_adc_reset;
  22:Src/usart_utils.c ****     }
  23:Src/usart_utils.c ****     else if (strcmp(buffer, "adc debug") == 0)
  86              		.loc 1 23 0
  87 004e 2E49     		ldr	r1, .L19+20
  88 0050 2000     		movs	r0, r4
  89 0052 FFF7FEFF 		bl	strcmp
  90              	.LVL8:
  91 0056 0028     		cmp	r0, #0
  92 0058 28D0     		beq	.L14
ARM GAS  /tmp/cc5TSKkW.s 			page 3


  24:Src/usart_utils.c ****     {
  25:Src/usart_utils.c ****         State.cmd = cmd_adc_debug;
  26:Src/usart_utils.c ****     }
  27:Src/usart_utils.c ****     else if (strcmp(buffer, "adc values") == 0)
  93              		.loc 1 27 0
  94 005a 2C49     		ldr	r1, .L19+24
  95 005c 2000     		movs	r0, r4
  96 005e FFF7FEFF 		bl	strcmp
  97              	.LVL9:
  98 0062 0028     		cmp	r0, #0
  99 0064 26D0     		beq	.L15
  28:Src/usart_utils.c ****     {
  29:Src/usart_utils.c ****         SERIAL_WRITE("\n");
  30:Src/usart_utils.c ****         State.cmd = cmd_adc_values;
  31:Src/usart_utils.c ****     }
  32:Src/usart_utils.c ****     else if (strcmp(buffer, "temp") == 0)
 100              		.loc 1 32 0
 101 0066 2A49     		ldr	r1, .L19+28
 102 0068 2000     		movs	r0, r4
 103 006a FFF7FEFF 		bl	strcmp
 104              	.LVL10:
 105 006e 0028     		cmp	r0, #0
 106 0070 34D0     		beq	.L16
  33:Src/usart_utils.c ****     {
  34:Src/usart_utils.c ****         State.cmd = cmd_temperature;
  35:Src/usart_utils.c ****     }
  36:Src/usart_utils.c ****     else if (strcmp(buffer, "dac test") == 0)
 107              		.loc 1 36 0
 108 0072 2849     		ldr	r1, .L19+32
 109 0074 2000     		movs	r0, r4
 110 0076 FFF7FEFF 		bl	strcmp
 111              	.LVL11:
 112 007a 0028     		cmp	r0, #0
 113 007c 32D0     		beq	.L17
  37:Src/usart_utils.c ****     {
  38:Src/usart_utils.c ****         State.cmd = cmd_dac_test;
  39:Src/usart_utils.c ****     }
  40:Src/usart_utils.c ****     else if (strcmp(buffer, "rf") == 0)
 114              		.loc 1 40 0
 115 007e 2649     		ldr	r1, .L19+36
 116 0080 2000     		movs	r0, r4
 117 0082 FFF7FEFF 		bl	strcmp
 118              	.LVL12:
 119 0086 0028     		cmp	r0, #0
 120 0088 30D0     		beq	.L18
  41:Src/usart_utils.c ****     {
  42:Src/usart_utils.c ****         State.cmd = cmd_rf_state;
  43:Src/usart_utils.c ****     }
  44:Src/usart_utils.c ****     else
  45:Src/usart_utils.c ****     {
  46:Src/usart_utils.c ****         State.cmd = cmd_undefined;
 121              		.loc 1 46 0
 122 008a 244B     		ldr	r3, .L19+40
 123 008c FF22     		movs	r2, #255
 124 008e 5A72     		strb	r2, [r3, #9]
 125              	.LBE3:
  47:Src/usart_utils.c ****     }
ARM GAS  /tmp/cc5TSKkW.s 			page 4


  48:Src/usart_utils.c **** }...
 126              		.loc 1 48 0
 127 0090 02E0     		b	.L1
 128              	.L11:
 129              	.LBB5:
  13:Src/usart_utils.c ****         State.cmd = cmd_blink;
 130              		.loc 1 13 0
 131 0092 224B     		ldr	r3, .L19+40
 132 0094 0122     		movs	r2, #1
 133 0096 5A72     		strb	r2, [r3, #9]
 134              	.LVL13:
 135              	.L1:
 136              	.LBE5:
 137              		.loc 1 48 0
 138 0098 1BB0     		add	sp, sp, #108
 139              		@ sp needed
 140 009a 30BD     		pop	{r4, r5, pc}
 141              	.LVL14:
 142              	.L12:
 143              	.LBB6:
  17:Src/usart_utils.c ****         State.cmd = cmd_adc_id;
 144              		.loc 1 17 0
 145 009c 1F4B     		ldr	r3, .L19+40
 146 009e 0222     		movs	r2, #2
 147 00a0 5A72     		strb	r2, [r3, #9]
 148 00a2 F9E7     		b	.L1
 149              	.L13:
  21:Src/usart_utils.c ****         State.cmd = cmd_adc_reset;
 150              		.loc 1 21 0
 151 00a4 1D4B     		ldr	r3, .L19+40
 152 00a6 0322     		movs	r2, #3
 153 00a8 5A72     		strb	r2, [r3, #9]
 154 00aa F5E7     		b	.L1
 155              	.L14:
  25:Src/usart_utils.c ****         State.cmd = cmd_adc_debug;
 156              		.loc 1 25 0
 157 00ac 1B4B     		ldr	r3, .L19+40
 158 00ae 0422     		movs	r2, #4
 159 00b0 5A72     		strb	r2, [r3, #9]
 160 00b2 F1E7     		b	.L1
 161              	.L15:
 162              	.LBB4:
  29:Src/usart_utils.c ****         SERIAL_WRITE("\n");
 163              		.loc 1 29 0
 164 00b4 01AC     		add	r4, sp, #4
 165              	.LVL15:
 166 00b6 6222     		movs	r2, #98
 167 00b8 0021     		movs	r1, #0
 168 00ba 6B46     		mov	r3, sp
 169 00bc 981D     		adds	r0, r3, #6
 170 00be FFF7FEFF 		bl	memset
 171              	.LVL16:
 172 00c2 0A23     		movs	r3, #10
 173 00c4 2380     		strh	r3, [r4]
 174              	.LVL17:
 175 00c6 F033     		adds	r3, r3, #240
 176 00c8 9B00     		lsls	r3, r3, #2
ARM GAS  /tmp/cc5TSKkW.s 			page 5


 177 00ca 0122     		movs	r2, #1
 178 00cc 2100     		movs	r1, r4
 179 00ce 0A48     		ldr	r0, .L19+4
 180 00d0 FFF7FEFF 		bl	HAL_UART_Transmit
 181              	.LVL18:
 182              	.LBE4:
  30:Src/usart_utils.c ****         State.cmd = cmd_adc_values;
 183              		.loc 1 30 0
 184 00d4 114B     		ldr	r3, .L19+40
 185 00d6 0622     		movs	r2, #6
 186 00d8 5A72     		strb	r2, [r3, #9]
 187 00da DDE7     		b	.L1
 188              	.LVL19:
 189              	.L16:
  34:Src/usart_utils.c ****         State.cmd = cmd_temperature;
 190              		.loc 1 34 0
 191 00dc 0F4B     		ldr	r3, .L19+40
 192 00de 0722     		movs	r2, #7
 193 00e0 5A72     		strb	r2, [r3, #9]
 194 00e2 D9E7     		b	.L1
 195              	.L17:
  38:Src/usart_utils.c ****         State.cmd = cmd_dac_test;
 196              		.loc 1 38 0
 197 00e4 0D4B     		ldr	r3, .L19+40
 198 00e6 0822     		movs	r2, #8
 199 00e8 5A72     		strb	r2, [r3, #9]
 200 00ea D5E7     		b	.L1
 201              	.L18:
  42:Src/usart_utils.c ****         State.cmd = cmd_rf_state;
 202              		.loc 1 42 0
 203 00ec 0B4B     		ldr	r3, .L19+40
 204 00ee 0922     		movs	r2, #9
 205 00f0 5A72     		strb	r2, [r3, #9]
 206 00f2 D1E7     		b	.L1
 207              	.L20:
 208              		.align	2
 209              	.L19:
 210 00f4 00000000 		.word	.LC0
 211 00f8 00000000 		.word	huart2
 212 00fc 08000000 		.word	.LC3
 213 0100 10000000 		.word	.LC6
 214 0104 18000000 		.word	.LC8
 215 0108 24000000 		.word	.LC10
 216 010c 30000000 		.word	.LC12
 217 0110 3C000000 		.word	.LC14
 218 0114 44000000 		.word	.LC16
 219 0118 50000000 		.word	.LC18
 220 011c 00000000 		.word	State
 221              	.LBE6:
 222              		.cfi_endproc
 223              	.LFE284:
 225              		.section	.rodata.UART_PARSE.str1.4,"aMS",%progbits,1
 226              		.align	2
 227              	.LC0:
 228 0000 203D3E20 		.ascii	" => \000"
 228      00
 229 0005 000000   		.space	3
ARM GAS  /tmp/cc5TSKkW.s 			page 6


 230              	.LC3:
 231 0008 626C696E 		.ascii	"blink\000"
 231      6B00
 232 000e 0000     		.space	2
 233              	.LC6:
 234 0010 61646320 		.ascii	"adc id\000"
 234      696400
 235 0017 00       		.space	1
 236              	.LC8:
 237 0018 61646320 		.ascii	"adc reset\000"
 237      72657365 
 237      7400
 238 0022 0000     		.space	2
 239              	.LC10:
 240 0024 61646320 		.ascii	"adc debug\000"
 240      64656275 
 240      6700
 241 002e 0000     		.space	2
 242              	.LC12:
 243 0030 61646320 		.ascii	"adc values\000"
 243      76616C75 
 243      657300
 244 003b 00       		.space	1
 245              	.LC14:
 246 003c 74656D70 		.ascii	"temp\000"
 246      00
 247 0041 000000   		.space	3
 248              	.LC16:
 249 0044 64616320 		.ascii	"dac test\000"
 249      74657374 
 249      00
 250 004d 000000   		.space	3
 251              	.LC18:
 252 0050 726600   		.ascii	"rf\000"
 253              		.text
 254              	.Letext0:
 255              		.file 2 "/usr/include/newlib/machine/_default_types.h"
 256              		.file 3 "/usr/include/newlib/sys/_stdint.h"
 257              		.file 4 "Drivers/CMSIS/Device/ST/STM32G0xx/Include/system_stm32g0xx.h"
 258              		.file 5 "Drivers/CMSIS/Device/ST/STM32G0xx/Include/stm32g071xx.h"
 259              		.file 6 "Drivers/STM32G0xx_HAL_Driver/Inc/stm32g0xx_hal_def.h"
 260              		.file 7 "Drivers/STM32G0xx_HAL_Driver/Inc/stm32g0xx_hal_dma.h"
 261              		.file 8 "Drivers/STM32G0xx_HAL_Driver/Inc/stm32g0xx_hal_flash.h"
 262              		.file 9 "Drivers/STM32G0xx_HAL_Driver/Inc/stm32g0xx_hal_uart.h"
 263              		.file 10 "Drivers/STM32G0xx_HAL_Driver/Inc/stm32g0xx_hal.h"
 264              		.file 11 "/usr/include/newlib/sys/lock.h"
 265              		.file 12 "/usr/include/newlib/sys/_types.h"
 266              		.file 13 "/usr/lib/gcc/arm-none-eabi/7.3.1/include/stddef.h"
 267              		.file 14 "/usr/include/newlib/sys/reent.h"
 268              		.file 15 "Inc/usart.h"
 269              		.file 16 "Inc/state.h"
 270              		.file 17 "<built-in>"
ARM GAS  /tmp/cc5TSKkW.s 			page 7


DEFINED SYMBOLS
                            *ABS*:00000000 usart_utils.c
     /tmp/cc5TSKkW.s:16     .text.UART_PARSE:00000000 $t
     /tmp/cc5TSKkW.s:23     .text.UART_PARSE:00000000 UART_PARSE
     /tmp/cc5TSKkW.s:210    .text.UART_PARSE:000000f4 $d
     /tmp/cc5TSKkW.s:226    .rodata.UART_PARSE.str1.4:00000000 $d

UNDEFINED SYMBOLS
memset
HAL_UART_Transmit
strcmp
huart2
State
