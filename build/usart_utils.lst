ARM GAS  C:\Users\Mateusz\AppData\Local\Temp\cchPhpuu.s 			page 1


   1              		.cpu cortex-m0plus
   2              		.eabi_attribute 20, 1
   3              		.eabi_attribute 21, 1
   4              		.eabi_attribute 23, 3
   5              		.eabi_attribute 24, 1
   6              		.eabi_attribute 25, 1
   7              		.eabi_attribute 26, 1
   8              		.eabi_attribute 30, 1
   9              		.eabi_attribute 34, 0
  10              		.eabi_attribute 18, 4
  11              		.file	"usart_utils.c"
  12              		.text
  13              	.Ltext0:
  14              		.cfi_sections	.debug_frame
  15              		.section	.rodata.UART_PARSE.str1.4,"aMS",%progbits,1
  16              		.align	2
  17              	.LC0:
  18 0000 203D3E20 		.ascii	" => \000"
  18      00
  19 0005 000000   		.align	2
  20              	.LC3:
  21 0008 626C696E 		.ascii	"blink\000"
  21      6B00
  22 000e 0000     		.align	2
  23              	.LC6:
  24 0010 61646320 		.ascii	"adc id\000"
  24      696400
  25 0017 00       		.align	2
  26              	.LC8:
  27 0018 61646320 		.ascii	"adc reset\000"
  27      72657365 
  27      7400
  28 0022 0000     		.align	2
  29              	.LC10:
  30 0024 61646320 		.ascii	"adc debug\000"
  30      64656275 
  30      6700
  31 002e 0000     		.align	2
  32              	.LC12:
  33 0030 61646320 		.ascii	"adc data\000"
  33      64617461 
  33      00
  34 0039 000000   		.align	2
  35              	.LC14:
  36 003c 61646320 		.ascii	"adc values\000"
  36      76616C75 
  36      657300
  37 0047 00       		.align	2
  38              	.LC16:
  39 0048 74656D70 		.ascii	"temp\000"
  39      00
  40 004d 000000   		.align	2
  41              	.LC18:
  42 0050 64616320 		.ascii	"dac test\000"
  42      74657374 
  42      00
  43              		.section	.text.UART_PARSE,"ax",%progbits
ARM GAS  C:\Users\Mateusz\AppData\Local\Temp\cchPhpuu.s 			page 2


  44              		.align	1
  45              		.global	UART_PARSE
  46              		.arch armv6s-m
  47              		.syntax unified
  48              		.code	16
  49              		.thumb_func
  50              		.fpu softvfp
  52              	UART_PARSE:
  53              	.LVL0:
  54              	.LFB284:
  55              		.file 1 "Src/usart_utils.c"
   1:Src/usart_utils.c **** #include "usart.h"
   2:Src/usart_utils.c **** #include <stdio.h>
   3:Src/usart_utils.c **** #include "state.h"
   4:Src/usart_utils.c **** #include "usart_utils.h"
   5:Src/usart_utils.c **** 
   6:Src/usart_utils.c **** extern state State;
   7:Src/usart_utils.c **** 
   8:Src/usart_utils.c **** void UART_PARSE(uint8_t buffer[UART_RX_BUFFER_LENGTH])
   9:Src/usart_utils.c **** {
  56              		.loc 1 9 1 view -0
  57              		.cfi_startproc
  58              		@ args = 0, pretend = 0, frame = 104
  59              		@ frame_needed = 0, uses_anonymous_args = 0
  60              		.loc 1 9 1 is_stmt 0 view .LVU1
  61 0000 30B5     		push	{r4, r5, lr}
  62              	.LCFI0:
  63              		.cfi_def_cfa_offset 12
  64              		.cfi_offset 4, -12
  65              		.cfi_offset 5, -8
  66              		.cfi_offset 14, -4
  67 0002 9BB0     		sub	sp, sp, #108
  68              	.LCFI1:
  69              		.cfi_def_cfa_offset 120
  70 0004 0400     		movs	r4, r0
  71              	.LBB2:
  10:Src/usart_utils.c ****     SERIAL_WRITE(" => ");
  72              		.loc 1 10 5 is_stmt 1 view .LVU2
  73 0006 01AD     		add	r5, sp, #4
  74 0008 6022     		movs	r2, #96
  75 000a 0021     		movs	r1, #0
  76 000c 02A8     		add	r0, sp, #8
  77              	.LVL1:
  78              		.loc 1 10 5 is_stmt 0 view .LVU3
  79 000e FFF7FEFF 		bl	memset
  80              	.LVL2:
  81              		.loc 1 10 5 is_stmt 1 view .LVU4
  82 0012 3D4B     		ldr	r3, .L12
  83 0014 1A68     		ldr	r2, [r3]
  84 0016 0192     		str	r2, [sp, #4]
  85 0018 1B79     		ldrb	r3, [r3, #4]
  86 001a 2B71     		strb	r3, [r5, #4]
  87              	.LVL3:
  88              		.loc 1 10 5 view .LVU5
  89 001c FA23     		movs	r3, #250
  90 001e 9B00     		lsls	r3, r3, #2
  91 0020 0422     		movs	r2, #4
ARM GAS  C:\Users\Mateusz\AppData\Local\Temp\cchPhpuu.s 			page 3


  92 0022 2900     		movs	r1, r5
  93 0024 3948     		ldr	r0, .L12+4
  94 0026 FFF7FEFF 		bl	HAL_UART_Transmit
  95              	.LVL4:
  96              	.LBE2:
  97              		.loc 1 10 25 view .LVU6
  11:Src/usart_utils.c ****     if (strcmp(buffer, "blink") == 0)
  98              		.loc 1 11 5 view .LVU7
  99              	.LBB3:
 100              		.loc 1 11 9 is_stmt 0 view .LVU8
 101 002a 3949     		ldr	r1, .L12+8
 102 002c 2000     		movs	r0, r4
 103 002e FFF7FEFF 		bl	strcmp
 104              	.LVL5:
 105              		.loc 1 11 8 view .LVU9
 106 0032 0028     		cmp	r0, #0
 107 0034 05D1     		bne	.L2
  12:Src/usart_utils.c ****     {
  13:Src/usart_utils.c ****         State.cmd = cmd_blink;
 108              		.loc 1 13 9 is_stmt 1 view .LVU10
 109              		.loc 1 13 19 is_stmt 0 view .LVU11
 110 0036 374A     		ldr	r2, .L12+12
 111 0038 4D23     		movs	r3, #77
 112 003a 0121     		movs	r1, #1
 113 003c D154     		strb	r1, [r2, r3]
 114              	.LVL6:
 115              	.L1:
 116              		.loc 1 13 19 view .LVU12
 117              	.LBE3:
  14:Src/usart_utils.c ****     }
  15:Src/usart_utils.c ****     else if (strcmp(buffer, "adc id") == 0)
  16:Src/usart_utils.c ****     {
  17:Src/usart_utils.c ****         State.cmd = cmd_adc_id;
  18:Src/usart_utils.c ****     }
  19:Src/usart_utils.c ****     else if (strcmp(buffer, "adc reset") == 0)
  20:Src/usart_utils.c ****     {
  21:Src/usart_utils.c ****         State.cmd = cmd_adc_reset;
  22:Src/usart_utils.c ****     }
  23:Src/usart_utils.c ****     else if (strcmp(buffer, "adc debug") == 0)
  24:Src/usart_utils.c ****     {
  25:Src/usart_utils.c ****         State.cmd = cmd_adc_debug;
  26:Src/usart_utils.c ****     }
  27:Src/usart_utils.c ****     else if (strcmp(buffer, "adc data") == 0)
  28:Src/usart_utils.c ****     {
  29:Src/usart_utils.c ****         State.cmd = cmd_adc_data;
  30:Src/usart_utils.c ****     }
  31:Src/usart_utils.c ****     else if (strcmp(buffer, "adc values") == 0)
  32:Src/usart_utils.c ****     {
  33:Src/usart_utils.c ****         SERIAL_WRITE("\n");
  34:Src/usart_utils.c ****         State.cmd = cmd_adc_values;
  35:Src/usart_utils.c ****     }
  36:Src/usart_utils.c ****     else if (strcmp(buffer, "temp") == 0)
  37:Src/usart_utils.c ****     {
  38:Src/usart_utils.c ****         State.cmd = cmd_temperature;
  39:Src/usart_utils.c ****     }
  40:Src/usart_utils.c ****     else if (strcmp(buffer, "dac test") == 0)
  41:Src/usart_utils.c ****     {
ARM GAS  C:\Users\Mateusz\AppData\Local\Temp\cchPhpuu.s 			page 4


  42:Src/usart_utils.c ****         State.cmd = cmd_dac_test;
  43:Src/usart_utils.c ****     }
  44:Src/usart_utils.c ****     else
  45:Src/usart_utils.c ****     {
  46:Src/usart_utils.c ****         State.cmd = cmd_undefined;
  47:Src/usart_utils.c ****     }
  48:Src/usart_utils.c **** }...
 118              		.loc 1 48 1 view .LVU13
 119 003e 1BB0     		add	sp, sp, #108
 120              		@ sp needed
 121 0040 30BD     		pop	{r4, r5, pc}
 122              	.LVL7:
 123              	.L2:
 124              	.LBB5:
  15:Src/usart_utils.c ****     else if (strcmp(buffer, "adc id") == 0)
 125              		.loc 1 15 10 is_stmt 1 view .LVU14
  15:Src/usart_utils.c ****     else if (strcmp(buffer, "adc id") == 0)
 126              		.loc 1 15 14 is_stmt 0 view .LVU15
 127 0042 3549     		ldr	r1, .L12+16
 128 0044 2000     		movs	r0, r4
 129 0046 FFF7FEFF 		bl	strcmp
 130              	.LVL8:
  15:Src/usart_utils.c ****     else if (strcmp(buffer, "adc id") == 0)
 131              		.loc 1 15 13 view .LVU16
 132 004a 0028     		cmp	r0, #0
 133 004c 04D1     		bne	.L4
  17:Src/usart_utils.c ****         State.cmd = cmd_adc_id;
 134              		.loc 1 17 9 is_stmt 1 view .LVU17
  17:Src/usart_utils.c ****         State.cmd = cmd_adc_id;
 135              		.loc 1 17 19 is_stmt 0 view .LVU18
 136 004e 314A     		ldr	r2, .L12+12
 137 0050 4D23     		movs	r3, #77
 138 0052 0221     		movs	r1, #2
 139 0054 D154     		strb	r1, [r2, r3]
 140 0056 F2E7     		b	.L1
 141              	.L4:
  19:Src/usart_utils.c ****     else if (strcmp(buffer, "adc reset") == 0)
 142              		.loc 1 19 10 is_stmt 1 view .LVU19
  19:Src/usart_utils.c ****     else if (strcmp(buffer, "adc reset") == 0)
 143              		.loc 1 19 14 is_stmt 0 view .LVU20
 144 0058 3049     		ldr	r1, .L12+20
 145 005a 2000     		movs	r0, r4
 146 005c FFF7FEFF 		bl	strcmp
 147              	.LVL9:
  19:Src/usart_utils.c ****     else if (strcmp(buffer, "adc reset") == 0)
 148              		.loc 1 19 13 view .LVU21
 149 0060 0028     		cmp	r0, #0
 150 0062 04D1     		bne	.L5
  21:Src/usart_utils.c ****         State.cmd = cmd_adc_reset;
 151              		.loc 1 21 9 is_stmt 1 view .LVU22
  21:Src/usart_utils.c ****         State.cmd = cmd_adc_reset;
 152              		.loc 1 21 19 is_stmt 0 view .LVU23
 153 0064 2B4A     		ldr	r2, .L12+12
 154 0066 4D23     		movs	r3, #77
 155 0068 0321     		movs	r1, #3
 156 006a D154     		strb	r1, [r2, r3]
 157 006c E7E7     		b	.L1
ARM GAS  C:\Users\Mateusz\AppData\Local\Temp\cchPhpuu.s 			page 5


 158              	.L5:
  23:Src/usart_utils.c ****     else if (strcmp(buffer, "adc debug") == 0)
 159              		.loc 1 23 10 is_stmt 1 view .LVU24
  23:Src/usart_utils.c ****     else if (strcmp(buffer, "adc debug") == 0)
 160              		.loc 1 23 14 is_stmt 0 view .LVU25
 161 006e 2C49     		ldr	r1, .L12+24
 162 0070 2000     		movs	r0, r4
 163 0072 FFF7FEFF 		bl	strcmp
 164              	.LVL10:
  23:Src/usart_utils.c ****     else if (strcmp(buffer, "adc debug") == 0)
 165              		.loc 1 23 13 view .LVU26
 166 0076 0028     		cmp	r0, #0
 167 0078 04D1     		bne	.L6
  25:Src/usart_utils.c ****         State.cmd = cmd_adc_debug;
 168              		.loc 1 25 9 is_stmt 1 view .LVU27
  25:Src/usart_utils.c ****         State.cmd = cmd_adc_debug;
 169              		.loc 1 25 19 is_stmt 0 view .LVU28
 170 007a 264A     		ldr	r2, .L12+12
 171 007c 4D23     		movs	r3, #77
 172 007e 0421     		movs	r1, #4
 173 0080 D154     		strb	r1, [r2, r3]
 174 0082 DCE7     		b	.L1
 175              	.L6:
  27:Src/usart_utils.c ****     else if (strcmp(buffer, "adc data") == 0)
 176              		.loc 1 27 10 is_stmt 1 view .LVU29
  27:Src/usart_utils.c ****     else if (strcmp(buffer, "adc data") == 0)
 177              		.loc 1 27 14 is_stmt 0 view .LVU30
 178 0084 2749     		ldr	r1, .L12+28
 179 0086 2000     		movs	r0, r4
 180 0088 FFF7FEFF 		bl	strcmp
 181              	.LVL11:
  27:Src/usart_utils.c ****     else if (strcmp(buffer, "adc data") == 0)
 182              		.loc 1 27 13 view .LVU31
 183 008c 0028     		cmp	r0, #0
 184 008e 04D1     		bne	.L7
  29:Src/usart_utils.c ****         State.cmd = cmd_adc_data;
 185              		.loc 1 29 9 is_stmt 1 view .LVU32
  29:Src/usart_utils.c ****         State.cmd = cmd_adc_data;
 186              		.loc 1 29 19 is_stmt 0 view .LVU33
 187 0090 204A     		ldr	r2, .L12+12
 188 0092 4D23     		movs	r3, #77
 189 0094 0521     		movs	r1, #5
 190 0096 D154     		strb	r1, [r2, r3]
 191 0098 D1E7     		b	.L1
 192              	.L7:
  31:Src/usart_utils.c ****     else if (strcmp(buffer, "adc values") == 0)
 193              		.loc 1 31 10 is_stmt 1 view .LVU34
  31:Src/usart_utils.c ****     else if (strcmp(buffer, "adc values") == 0)
 194              		.loc 1 31 14 is_stmt 0 view .LVU35
 195 009a 2349     		ldr	r1, .L12+32
 196 009c 2000     		movs	r0, r4
 197 009e FFF7FEFF 		bl	strcmp
 198              	.LVL12:
  31:Src/usart_utils.c ****     else if (strcmp(buffer, "adc values") == 0)
 199              		.loc 1 31 13 view .LVU36
 200 00a2 0028     		cmp	r0, #0
 201 00a4 0AD0     		beq	.L11
ARM GAS  C:\Users\Mateusz\AppData\Local\Temp\cchPhpuu.s 			page 6


  36:Src/usart_utils.c ****     else if (strcmp(buffer, "temp") == 0)
 202              		.loc 1 36 10 is_stmt 1 view .LVU37
  36:Src/usart_utils.c ****     else if (strcmp(buffer, "temp") == 0)
 203              		.loc 1 36 14 is_stmt 0 view .LVU38
 204 00a6 2149     		ldr	r1, .L12+36
 205 00a8 2000     		movs	r0, r4
 206 00aa FFF7FEFF 		bl	strcmp
 207              	.LVL13:
  36:Src/usart_utils.c ****     else if (strcmp(buffer, "temp") == 0)
 208              		.loc 1 36 13 view .LVU39
 209 00ae 0028     		cmp	r0, #0
 210 00b0 1AD1     		bne	.L9
  38:Src/usart_utils.c ****         State.cmd = cmd_temperature;
 211              		.loc 1 38 9 is_stmt 1 view .LVU40
  38:Src/usart_utils.c ****         State.cmd = cmd_temperature;
 212              		.loc 1 38 19 is_stmt 0 view .LVU41
 213 00b2 184A     		ldr	r2, .L12+12
 214 00b4 4D23     		movs	r3, #77
 215 00b6 0721     		movs	r1, #7
 216 00b8 D154     		strb	r1, [r2, r3]
 217 00ba C0E7     		b	.L1
 218              	.L11:
 219              	.LBB4:
  33:Src/usart_utils.c ****         SERIAL_WRITE("\n");
 220              		.loc 1 33 9 is_stmt 1 view .LVU42
 221 00bc 01AC     		add	r4, sp, #4
 222              	.LVL14:
  33:Src/usart_utils.c ****         SERIAL_WRITE("\n");
 223              		.loc 1 33 9 is_stmt 0 view .LVU43
 224 00be 0023     		movs	r3, #0
 225 00c0 0193     		str	r3, [sp, #4]
 226 00c2 6022     		movs	r2, #96
 227 00c4 0021     		movs	r1, #0
 228 00c6 02A8     		add	r0, sp, #8
 229 00c8 FFF7FEFF 		bl	memset
 230              	.LVL15:
  33:Src/usart_utils.c ****         SERIAL_WRITE("\n");
 231              		.loc 1 33 9 is_stmt 1 view .LVU44
 232 00cc 0A23     		movs	r3, #10
 233 00ce 2380     		strh	r3, [r4]
 234              	.LVL16:
  33:Src/usart_utils.c ****         SERIAL_WRITE("\n");
 235              		.loc 1 33 9 view .LVU45
 236 00d0 F033     		adds	r3, r3, #240
 237 00d2 9B00     		lsls	r3, r3, #2
 238 00d4 0122     		movs	r2, #1
 239 00d6 2100     		movs	r1, r4
 240 00d8 0C48     		ldr	r0, .L12+4
 241 00da FFF7FEFF 		bl	HAL_UART_Transmit
 242              	.LVL17:
 243              	.LBE4:
  33:Src/usart_utils.c ****         SERIAL_WRITE("\n");
 244              		.loc 1 33 27 view .LVU46
  34:Src/usart_utils.c ****         State.cmd = cmd_adc_values;
 245              		.loc 1 34 9 view .LVU47
  34:Src/usart_utils.c ****         State.cmd = cmd_adc_values;
 246              		.loc 1 34 19 is_stmt 0 view .LVU48
ARM GAS  C:\Users\Mateusz\AppData\Local\Temp\cchPhpuu.s 			page 7


 247 00de 0D4A     		ldr	r2, .L12+12
 248 00e0 4D23     		movs	r3, #77
 249 00e2 0621     		movs	r1, #6
 250 00e4 D154     		strb	r1, [r2, r3]
 251 00e6 AAE7     		b	.L1
 252              	.LVL18:
 253              	.L9:
  40:Src/usart_utils.c ****     else if (strcmp(buffer, "dac test") == 0)
 254              		.loc 1 40 10 is_stmt 1 view .LVU49
  40:Src/usart_utils.c ****     else if (strcmp(buffer, "dac test") == 0)
 255              		.loc 1 40 14 is_stmt 0 view .LVU50
 256 00e8 1149     		ldr	r1, .L12+40
 257 00ea 2000     		movs	r0, r4
 258 00ec FFF7FEFF 		bl	strcmp
 259              	.LVL19:
  40:Src/usart_utils.c ****     else if (strcmp(buffer, "dac test") == 0)
 260              		.loc 1 40 13 view .LVU51
 261 00f0 0028     		cmp	r0, #0
 262 00f2 04D1     		bne	.L10
  42:Src/usart_utils.c ****         State.cmd = cmd_dac_test;
 263              		.loc 1 42 9 is_stmt 1 view .LVU52
  42:Src/usart_utils.c ****         State.cmd = cmd_dac_test;
 264              		.loc 1 42 19 is_stmt 0 view .LVU53
 265 00f4 074A     		ldr	r2, .L12+12
 266 00f6 4D23     		movs	r3, #77
 267 00f8 0821     		movs	r1, #8
 268 00fa D154     		strb	r1, [r2, r3]
 269 00fc 9FE7     		b	.L1
 270              	.L10:
  46:Src/usart_utils.c ****         State.cmd = cmd_undefined;
 271              		.loc 1 46 9 is_stmt 1 view .LVU54
  46:Src/usart_utils.c ****         State.cmd = cmd_undefined;
 272              		.loc 1 46 19 is_stmt 0 view .LVU55
 273 00fe 054A     		ldr	r2, .L12+12
 274 0100 4D23     		movs	r3, #77
 275 0102 FF21     		movs	r1, #255
 276 0104 D154     		strb	r1, [r2, r3]
 277              	.LBE5:
 278              		.loc 1 48 1 view .LVU56
 279 0106 9AE7     		b	.L1
 280              	.L13:
 281              		.align	2
 282              	.L12:
 283 0108 00000000 		.word	.LC0
 284 010c 00000000 		.word	huart2
 285 0110 08000000 		.word	.LC3
 286 0114 00000000 		.word	State
 287 0118 10000000 		.word	.LC6
 288 011c 18000000 		.word	.LC8
 289 0120 24000000 		.word	.LC10
 290 0124 30000000 		.word	.LC12
 291 0128 3C000000 		.word	.LC14
 292 012c 48000000 		.word	.LC16
 293 0130 50000000 		.word	.LC18
 294              		.cfi_endproc
 295              	.LFE284:
 297              		.text
ARM GAS  C:\Users\Mateusz\AppData\Local\Temp\cchPhpuu.s 			page 8


 298              	.Letext0:
 299              		.file 2 "c:\\gnu tools arm embedded\\9 2019-q4-major\\arm-none-eabi\\include\\machine\\_default_ty
 300              		.file 3 "c:\\gnu tools arm embedded\\9 2019-q4-major\\arm-none-eabi\\include\\sys\\_stdint.h"
 301              		.file 4 "Drivers/CMSIS/Device/ST/STM32G0xx/Include/system_stm32g0xx.h"
 302              		.file 5 "Drivers/CMSIS/Device/ST/STM32G0xx/Include/stm32g071xx.h"
 303              		.file 6 "Drivers/STM32G0xx_HAL_Driver/Inc/stm32g0xx_hal_def.h"
 304              		.file 7 "Drivers/STM32G0xx_HAL_Driver/Inc/stm32g0xx_hal_dma.h"
 305              		.file 8 "Drivers/STM32G0xx_HAL_Driver/Inc/stm32g0xx_hal_flash.h"
 306              		.file 9 "Drivers/STM32G0xx_HAL_Driver/Inc/stm32g0xx_hal_uart.h"
 307              		.file 10 "Drivers/STM32G0xx_HAL_Driver/Inc/stm32g0xx_hal.h"
 308              		.file 11 "c:\\gnu tools arm embedded\\9 2019-q4-major\\arm-none-eabi\\include\\sys\\lock.h"
 309              		.file 12 "c:\\gnu tools arm embedded\\9 2019-q4-major\\arm-none-eabi\\include\\sys\\_types.h"
 310              		.file 13 "c:\\gnu tools arm embedded\\9 2019-q4-major\\lib\\gcc\\arm-none-eabi\\9.2.1\\include\\st
 311              		.file 14 "c:\\gnu tools arm embedded\\9 2019-q4-major\\arm-none-eabi\\include\\sys\\reent.h"
 312              		.file 15 "Inc/usart.h"
 313              		.file 16 "Inc/state.h"
 314              		.file 17 "<built-in>"
ARM GAS  C:\Users\Mateusz\AppData\Local\Temp\cchPhpuu.s 			page 9


DEFINED SYMBOLS
                            *ABS*:00000000 usart_utils.c
C:\Users\Mateusz\AppData\Local\Temp\cchPhpuu.s:16     .rodata.UART_PARSE.str1.4:00000000 $d
C:\Users\Mateusz\AppData\Local\Temp\cchPhpuu.s:44     .text.UART_PARSE:00000000 $t
C:\Users\Mateusz\AppData\Local\Temp\cchPhpuu.s:52     .text.UART_PARSE:00000000 UART_PARSE
C:\Users\Mateusz\AppData\Local\Temp\cchPhpuu.s:283    .text.UART_PARSE:00000108 $d

UNDEFINED SYMBOLS
memset
HAL_UART_Transmit
strcmp
huart2
State
